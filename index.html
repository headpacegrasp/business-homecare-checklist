<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comfort Keepers Franchise Launch Checklist (Annapolis, MD)</title>
    <style>
        /* Base Styles */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            background-color: #f8f9fa;
            color: #212529;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 15px;
        }
        h1, h2 {
            text-align: center;
            color: #004d9c; /* Comfort Keepers Primary Blue */
        }
        h1 {
            border-bottom: 2px solid #ffcc00; /* CK Yellow accent */
            padding-bottom: 10px;
            margin-bottom: 5px;
            font-weight: 700;
        }
        h2 {
            font-size: 1.5rem;
            margin-top: 5px;
            font-weight: 300;
        }
        .header-box {
            background-color: #e9ecef;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 30px;
            text-align: center;
        }
        /* Progress Bar */
        .progress-container {
            width: 80%;
            margin: 10px auto 20px;
            background-color: #dee2e6;
            border-radius: 4px;
            height: 25px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
        }
        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: #28a745; /* Green for progress */
            transition: width 0.4s ease-in-out;
            text-align: right;
            line-height: 25px;
            color: white;
            font-weight: 600;
            padding-right: 10px;
            box-sizing: border-box;
        }
        /* Accordion (Phase) Styles */
        .phase-card {
            background-color: #ffffff;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            margin-bottom: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .phase-header {
            padding: 15px;
            cursor: pointer;
            background-color: #004d9c;
            color: white;
            border-radius: 6px 6px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.25rem;
            font-weight: 600;
        }
        .phase-header:hover {
            background-color: #003a73;
        }
        .phase-body {
            padding: 15px;
        }
        .phase-title {
            margin-left: 10px;
        }
        /* Sub-Phase Styles */
        .sub-phase-header {
            background-color: #f1f1f1;
            padding: 10px 15px;
            margin-top: 10px;
            border-radius: 4px;
            font-weight: 600;
            font-size: 1.1rem;
            border-left: 5px solid #ffcc00;
        }
        /* Checklist Table Styles */
        .checklist-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        .checklist-table th, .checklist-table td {
            padding: 12px 8px;
            border: 1px solid #e9ecef;
            vertical-align: top;
            font-size: 0.9rem;
        }
        .checklist-table th {
            background-color: #f8f8f8;
            text-align: left;
            font-weight: 700;
            color: #343a40;
        }
        .checklist-table td:first-child {
            width: 30px; /* Checkbox column */
            text-align: center;
        }
        .checklist-table .item-title {
            font-weight: 600;
        }
        .summary-text {
            color: #6c757d;
            font-size: 0.85rem;
            margin-top: 5px;
            display: block;
        }
        .cost-col {
            min-width: 120px;
        }
        .completed-row {
            background-color: #f0fff4 !important; /* Light success color */
        }

        /* Checkbox Styles */
        input[type="checkbox"] {
            transform: scale(1.3);
            cursor: pointer;
            accent-color: #ffcc00;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .checklist-table, .checklist-table tbody, .checklist-table tr, .checklist-table td {
                display: block;
                width: 100%;
            }
            .checklist-table th {
                display: none; /* Hide table headers */
            }
            .checklist-table tr {
                margin-bottom: 15px;
                border: 1px solid #dee2e6;
                display: block;
                padding: 10px;
            }
            .checklist-table td {
                text-align: left;
                padding: 5px 0;
                border: none;
            }
            .checklist-table td:before {
                content: attr(data-label);
                font-weight: bold;
                margin-right: 10px;
                display: inline-block;
                width: 100px;
            }
            .checklist-table td:first-child {
                text-align: left;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>Comfort Keepers Franchise Launch Checklist</h1>
            <h2>Annapolis, Maryland Location</h2>
            <div class="header-box">
                <p style="margin: 0; font-size: 0.85rem;">
                    User ID: <code id="user-id">Loading...</code>
                </p>
                <p style="margin: 5px 0 0;">
                    **Target Opening Date:** <strong style="color: #d9534f; font-size: 1.1rem;">January 31, 2026</strong> | Total Actions: <strong id="total-actions">143</strong>
                </p>
                <div class="progress-container">
                    <div id="progress-bar" class="progress-bar">0%</div>
                </div>
                <p style="margin: 0; font-size: 1.1rem;">
                    Completed: <strong id="completed-count">0</strong> / <span id="total-tasks-display">143</span>
                </p>
            </div>
        </header>

        <main id="checklist-container">
            <!-- Loading indicator -->
            <div id="loading-message" style="text-align: center; padding: 50px; font-size: 1.2rem;">
                Initializing Firebase and loading checklist data...
            </div>
            <!-- Checklist will be rendered here by JavaScript -->
        </main>
    </div>

    <!-- Firebase Imports -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Global variables provided by the environment
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let db;
        let auth;
        let currentUserId = 'anonymous';

        // --- 1. CHECKLIST DATA (143 Items) ---
        // Data structure includes all 143 items, summarized and phased.
        const CHECKLIST_DATA = [
            // PHASE 1: PRE-OPENING PHASE (Legal, Setup, Training)
            {
                phase: "Phase 1: Pre-Opening Phase (Legal, Setup, Training)",
                sub_phases: [
                    {
                        name: "Legal & Business Formation",
                        items: [
                            { title: "Register Business Entity", summary: "Establish your business as a legal entity with the state of Maryland. Choose between LLC (limited liability company) or Corporation structure based on your tax and liability preferences. This creates legal separation between personal and business assets.", action: "File articles of organization/incorporation with Maryland Department of Assessments & Taxation", timeline: "Complete 30-45 days before opening", duration: "30-45 days", cost: "$100-300 filing fees" },
                            { title: "Obtain Federal EIN", summary: "The Employer Identification Number (EIN) is like a Social Security number for your business. Required for hiring employees, opening bank accounts, and filing taxes. Free to obtain directly from IRS.", action: "Apply online at IRS.gov or through your accountant", timeline: "Complete immediately after entity formation", duration: "1-3 days", cost: "Free" },
                            { title: "Apply for Anne Arundel County Business License", summary: "Local operating permit required to legally conduct business in Anne Arundel County. Ensures compliance with local regulations and zoning requirements.", action: "Submit application to Anne Arundel County Office of Finance", timeline: "2-4 weeks processing time", duration: "14-28 days", cost: "Varies by business type, typically $50-150" },
                            { title: "Register with Maryland Board of Labor, Industry and Licensing", summary: "State-level registration for employers in Maryland. Covers unemployment insurance, workers' compensation, and labor law compliance.", action: "Complete online registration through Maryland Department of Labor portal", timeline: "Complete before hiring first employee", duration: "N/A (Milestone)", cost: "Registration free; insurance premiums vary" },
                            { title: "Complete Home Care Agency Registration", summary: "Maryland may require specific licensing for home care agencies. Ensures compliance with health and safety standards for providing in-home care services.", action: "Check requirements with Maryland Office of Health Care Quality (OHCQ)", timeline: "60-90 days processing time", duration: "60-90 days", cost: "$200-500 application fee" },
                            { title: "Obtain Local Health Department Clearances", summary: "Health department approval ensures your business meets public health standards, particularly important for agencies providing personal care services.", action: "Contact Anne Arundel County Department of Health", timeline: "2-4 weeks", duration: "14-28 days", cost: "Minimal fees" },
                            { title: "General Liability Insurance", summary: "Protects business from claims of bodily injury, property damage, and personal injury that occur during business operations. Essential coverage for client interactions.", action: "Obtain quotes from commercial insurance brokers (Min $1-2M coverage)", timeline: "Complete before opening", duration: "7-14 days", cost: "$1,500-3,000 annually" },
                            { title: "Professional Liability Insurance (E&O)", summary: "Also called errors and omissions insurance. Protects against claims of negligence, mistakes, or failure to provide adequate care services.", action: "Work with insurance broker specializing in home care (Min $1-2M coverage)", timeline: "Complete before opening", duration: "7-14 days", cost: "$2,000-4,000 annually" },
                            { title: "Workers' Compensation Insurance", summary: "Mandatory coverage in Maryland for businesses with employees. Covers medical costs and lost wages if employee injured on job. Protects both employees and business from workplace injury costs.", action: "Obtain policy before hiring first employee", timeline: "Complete before hiring", duration: "7-14 days", cost: "2-5% of payroll, varies by job classification" },
                            { title: "Commercial Auto Insurance", summary: "Covers vehicles used for business purposes, including owner and employee vehicles used for client visits, errands, or transportation services.", action: "Add commercial auto coverage or hired/non-owned auto policy", timeline: "Complete before opening", duration: "7-14 days", cost: "$1,200-2,500 annually" },
                            { title: "Employment Practices Liability Insurance (EPLI)", summary: "Protects against claims from employees including wrongful termination, discrimination, harassment, or wage violations. Critical protection for employment-related lawsuits.", action: "Add as endorsement or standalone policy ($500K-1M recommended)", timeline: "Complete before hiring", duration: "7-14 days", cost: "$800-1,500 annually" },
                            { title: "Cyber Liability Insurance", summary: "Covers data breaches, cyber attacks, and loss of client personal information. Essential as you'll store sensitive client and employee data electronically.", action: "Discuss with insurance broker ($500K-1M recommended)", timeline: "Complete before opening", duration: "7-14 days", cost: "$500-1,000 annually" }
                        ]
                    },
                    {
                        name: "Franchise Agreement & Training",
                        items: [
                            { title: "Sign Franchise Disclosure Document (FDD)", summary: "Legal document required by FTC that discloses all essential information about the franchise opportunity. Must receive 14 days before signing agreement.", action: "Review thoroughly with franchise attorney, sign after 14-day waiting period", timeline: "Allow 2-3 weeks for review", duration: "14-21 days", cost: "Attorney review $500-1,500" },
                            { title: "Execute Franchise Agreement", summary: "Binding contract between you and Comfort Keepers defining rights, responsibilities, fees, territory, and terms. Typically 10-year term with renewal options.", action: "Sign after FDD review period and legal counsel review", timeline: "After 14-day FDD waiting period", duration: "1 day", cost: "Initial franchise fee $59,950" },
                            { title: "Complete Item 19 Financial Performance Review", summary: "Item 19 of FDD contains financial performance data from existing franchises. Critical for understanding realistic revenue and profit expectations.", action: "Analyze data, compare to your market and projections", timeline: "During FDD review period", duration: "N/A (Included in review)", cost: "Included in FDD review" },
                            { title: "Review Territory Rights and Exclusivity Terms", summary: "Understand exact geographic boundaries of your exclusive territory, population demographics, and any restrictions on franchisor or other franchisees operating in your area.", action: "Map out territory, analyze market opportunity within boundaries", timeline: "Before signing franchise agreement", duration: "N/A (Included in review)", cost: "Included in agreement" },
                            { title: "Complete Corporate Training at Headquarters", summary: "Intensive training program at Comfort Keepers headquarters covering all aspects of franchise operations. Typically 1-2 weeks of classroom and hands-on instruction.", action: "Schedule training immediately after signing agreement", timeline: "1-2 weeks, usually within 30 days of signing", duration: "7-14 days", cost: "Training included; travel expenses $1,500-3,000" },
                            { title: "Operations Management Training", summary: "Learn day-to-day operations including scheduling, quality assurance, client management, caregiver supervision, and administrative procedures.", action: "Complete all modules and pass assessments", timeline: "Part of initial training program", duration: "N/A (Included in training)", cost: "Included in initial training" },
                            { title: "Sales and Marketing Fundamentals", summary: "Training on selling home care services, building referral networks, marketing strategies, and converting leads to clients. Learn Comfort Keepers proven sales methods.", action: "Complete training and receive marketing materials", timeline: "Part of initial training program", duration: "N/A (Included in training)", cost: "Included in initial training" },
                            { title: "Care Coordinator Certification", summary: "Specialized training for conducting client assessments, developing care plans, matching caregivers to clients, and managing ongoing care relationships. Critical role in service quality.", action: "Complete certification program", timeline: "Part of initial training program", duration: "N/A (Included in training)", cost: "Included in initial training" },
                            { title: "Technology Platform Training", summary: "Comprehensive training on franchise software systems including CRM, scheduling, billing, payroll, and caregiver management. Master the technology that runs daily operations.", action: "Complete all software training modules", timeline: "Part of initial training program", duration: "N/A (Included in training)", cost: "Included; ongoing software fees apply" },
                            { title: "Compliance and Regulatory Requirements", summary: "Training on federal and state regulations including HIPAA privacy, employment laws, caregiver regulations, documentation requirements, and quality standards.", action: "Complete compliance training and obtain required certifications", timeline: "Part of initial training program", duration: "N/A (Included in training)", cost: "Included in initial training" }
                        ]
                    },
                    {
                        name: "Office Setup",
                        items: [
                            { title: "Secure Office Space in Annapolis", summary: "Professional office location serves as operational hub and meeting space for clients/families. Location should be accessible, professional, and sized for staff of 3-5 initially.", action: "Lease 800-1,200 sq ft office in professional building", timeline: "Secure 60 days before opening", duration: "60 days (Lead time)", cost: "$3,125/month rent budgeted" },
                            { title: "Verify ADA Compliance", summary: "Ensure office meets Americans with Disabilities Act requirements for accessibility including parking, entrances, restrooms, and common areas. Required by law.", action: "Inspect facility for compliance before signing lease", timeline: "During site selection", duration: "N/A (Included in site selection)", cost: "Included in lease; modifications if needed $2,000-5,000" },
                            { title: "Ensure Professional Appearance for Client Meetings", summary: "Office should convey professionalism, warmth, and trustworthiness. First impressions critical for families making care decisions. Should include private consultation space.", action: "Select location with professional ambiance, good lighting, and comfortable meeting areas", timeline: "During site selection", duration: "N/A (Included in site selection)", cost: "Included in overall office setup" },
                            { title: "Install Furniture and Fixtures", summary: "Office furniture including desks, chairs, filing cabinets, reception area seating, and conference table for client meetings. Quality matters for professional image.", action: "Purchase and install furniture per Comfort Keepers standards", timeline: "2-3 weeks before opening", duration: "14-21 days", cost: "$5,000-8,000" },
                            { title: "Install Signage (Interior and Exterior)", summary: "Branded signage meeting Comfort Keepers standards for visibility and brand consistency. Exterior sign helps clients find office; interior reinforces brand.", action: "Work with approved vendors for brand-compliant signage", timeline: "3-4 weeks before opening (requires permits)", duration: "21-28 days", cost: "$2,000-4,000" },
                            { title: "Set Up Phone System", summary: "Professional business phone system with main line (410) 224-3849, voicemail, call routing, and ability to forward calls. First point of contact for potential clients.", action: "Install VoIP or traditional business phone system", timeline: "2 weeks before opening", duration: "14 days", cost: "$50-150/month" },
                            { title: "Install Computer Equipment and Software", summary: "Computers for office staff including owner, desktop computers or laptops, printers, monitors, and necessary software licenses.", action: "Purchase equipment meeting franchise technology requirements", timeline: "2 weeks before opening", duration: "14 days", cost: "$3,000-5,000" },
                            { title: "Stock Office Supplies and Materials", summary: "Basic office supplies including paper, pens, folders, client forms, caregiver timesheets, first aid supplies, and administrative materials for daily operations.", action: "Purchase supplies from approved vendors", timeline: "1 week before opening", duration: "7 days", cost: "$500-1,000 initial stock" },
                            { title: "Install Security System", summary: "Protect office, equipment, and confidential client files with alarm system and potentially security cameras. Important for after-hours protection and liability.", action: "Contract with security company for installation and monitoring", timeline: "Before moving in equipment", duration: "N/A (Milestone)", cost: "$500-1,000 installation; $40-80/month monitoring" }
                        ]
                    },
                    {
                        name: "Technology & Systems",
                        items: [
                            { title: "Implement ClearCare Operations Platform", summary: "ClearCare (or current approved platform) is comprehensive software managing scheduling, billing, caregiver tracking, client records, and care plans. Central nervous system of business operations.", action: "Complete setup with franchise support and software vendor", timeline: "2-3 weeks before opening", duration: "14-21 days", cost: "$200-400/month subscription" },
                            { title: "Set Up Login Credentials for All Users", summary: "Create secure accounts for owner, office staff, care coordinators, and caregivers with appropriate permission levels for data security and HIPAA compliance.", action: "Work with IT support to create user accounts", timeline: "During software implementation", duration: "N/A (Included in setup)", cost: "Included in platform subscription" },
                            { title: "Complete Data Migration (if applicable)", summary: "If transitioning from another business or system, migrate existing client and caregiver data to new platform. Ensures continuity and data preservation.", action: "Work with software vendor for data import", timeline: "Before go-live date", duration: "N/A (Milestone)", cost: "Included or $500-1,500 for complex migrations" },
                            { title: "Train Staff on Platform Usage", summary: "Comprehensive training for all users on scheduling caregivers, documenting care visits, running reports, billing, and managing daily operations through software.", action: "Complete training modules and hands-on practice", timeline: "Week before opening and first 2 weeks", duration: "7-21 days", cost: "Included in platform subscription" },
                            { title: "Set Up Business Phone Line", summary: "Dedicated business line (410) 224-3849 separate from personal phones. Professional appearance and allows call tracking for marketing ROI analysis.", action: "Activate business phone with local area code", timeline: "2 weeks before opening", duration: "14 days", cost: "$50-100/month" },
                            { title: "Set Up Email Using Comfort Keepers Domain", summary: "Professional email addresses (yourname@comfortkeepers.com format) for brand consistency, credibility, and professional communication with clients and referral sources.", action: "Work with franchise IT support for email setup", timeline: "2 weeks before opening", duration: "14 days", cost: "Included in franchise fees" },
                            { title: "Configure Website Subdomain", summary: "Your local website (typically annapolis.comfortkeepers.com) provides information about services, allows lead generation, and appears in local search results.", action: "Customize template with local information, photos, and contact details", timeline: "3-4 weeks before opening", duration: "21-28 days", cost: "Included in franchise fees; $100-200/month hosting" },
                            { title: "Set Up Social Media Business Accounts", summary: "Facebook, Instagram, LinkedIn business pages for local market presence, community engagement, reputation management, and digital marketing campaigns.", action: "Create accounts using business information and branded profile images", timeline: "2-3 weeks before opening", duration: "14-21 days", cost: "Free; advertising budget additional" },
                            { title: "Order Business Cards (Owner, Staff, Caregivers)", summary: "Professional business cards following Comfort Keepers brand standards for networking, community events, and leave-behinds at referral sources.", action: "Order through approved print vendor", timeline: "3 weeks before opening", duration: "21 days", cost: "$100-200 for initial batch" },
                            { title: "Order Brochures and Service Guides", summary: "Marketing materials explaining services, pricing, and process for potential clients and referral sources. Key sales tool for converting inquiries.", action: "Order branded materials from franchise-approved vendor", timeline: "3 weeks before opening", duration: "21 days", cost: "$300-500 for initial order" },
                            { title: "Prepare Client Welcome Packets", summary: "Professional packets given to new clients containing service agreement, client handbook, bill of rights, caregiver profiles, and welcome letter. Sets professional tone.", action: "Assemble packets with all required documents", timeline: "Week before opening", duration: "7 days", cost: "$100-200 for materials" },
                            { title: "Create Caregiver Recruitment Materials", summary: "Flyers, job descriptions, and marketing materials to attract quality caregivers. Highlights benefits, culture, and opportunities.", action: "Customize templates and print materials", timeline: "3-4 weeks before opening", duration: "21-28 days", cost: "$200-300 for materials" },
                            { title: "Order Branded Apparel and Name Tags", summary: "Polo shirts, jackets, or scrubs with Comfort Keepers logo for staff and caregivers. Professional appearance builds brand recognition and trust.", action: "Order through approved apparel vendor", timeline: "3-4 weeks before opening", duration: "21-28 days", cost: "$500-1,000 initial order" }
                        ]
                    }
                ]
            },

            // PHASE 2: STAFFING & RECRUITMENT
            {
                phase: "Phase 2: Staffing & Recruitment",
                sub_phases: [
                    {
                        name: "Key Personnel Hiring",
                        items: [
                            { title: "Establish Owner/Operator Role", summary: "Owner actively manages business with 22 hours per week commitment minimum (per your plan). Responsibilities include strategic planning, sales, financial management, and staff supervision.", action: "Define role, responsibilities, and time commitment", timeline: "Immediately upon franchise signing", duration: "1 day", cost: "Owner compensation based on business performance" },
                            { title: "Complete Owner HR Compliance Training", summary: "Training on employment laws, hiring practices, discrimination prevention, wage laws, and HR best practices. Critical for avoiding costly employment mistakes.", action: "Complete online courses or hire HR consultant for training", timeline: "Before hiring first employee", duration: "1-3 days", cost: "$200-500 for training" },
                            { title: "Complete Owner Background Check and Clearances", summary: "Many states require owners and managers to pass background checks and obtain health clearances when operating home care agency. Demonstrates commitment to safety.", action: "Submit to background check and obtain required clearances", timeline: "During licensing process", duration: "30-90 days (Concurrent)", cost: "$50-100" },
                            { title: "Recruit Office Staff Position", summary: "Critical first hire handles reception, scheduling, billing, client inquiries, and administrative tasks. Frees owner for sales and growth activities. Budget $52,000/year.", action: "Post job, conduct interviews, check references", timeline: "Hire 2-3 weeks before opening", duration: "14-21 days", cost: "$52,000/year salary plus benefits" },
                            { title: "Interview and Hire Office Staff", summary: "Structured interview process assessing skills, experience with seniors, customer service ability, organizational skills, and cultural fit.", action: "Conduct 2-3 rounds of interviews, skills testing if needed", timeline: "3-4 weeks before opening", duration: "21-28 days", cost: "Included in recruitment" },
                            { title: "Complete Office Staff Onboarding", summary: "Comprehensive onboarding including paperwork, benefits enrollment, training on systems, introduction to services, and shadowing owner.", action: "Follow structured onboarding checklist", timeline: "1-2 weeks before opening", duration: "7-14 days", cost: "Included in salary" },
                            { title: "Set Up Office Staff Employee Files", summary: "Confidential personnel file containing application, I-9, W-4, background check, job description, emergency contacts, and performance documentation.", action: "Create secure filing system (physical and digital)", timeline: "During onboarding", duration: "N/A (Included in onboarding)", cost: "Included in office supplies" },
                            { title: "Hire Experienced Care Coordinator", summary: "Care Coordinator conducts assessments, develops care plans, matches caregivers to clients, manages ongoing care, and serves as primary client contact. Critical quality role.", action: "Recruit candidate with home care or nursing background", timeline: "Hire 2 weeks before opening", duration: "14 days", cost: "$40,000-55,000/year depending on experience" },
                            { title: "Complete Care Coordinator Certification", summary: "Specialized training in assessment techniques, care planning, client communication, and Comfort Keepers protocols. May include state-required certifications.", action: "Enroll in Comfort Keepers certification program", timeline: "Within first 30 days of employment", duration: "30 days", cost: "Included in training; time investment" },
                            { title: "Train Care Coordinator on Assessment Protocols", summary: "Detailed training on conducting in-home assessments, identifying care needs, safety evaluations, and documenting findings for care plan development.", action: "Complete training modules and shadow experienced coordinator", timeline: "First 2 weeks of employment", duration: "14 days", cost: "Included in training" },
                            { title: "Shadow Existing Coordinator (if available)", summary: "Hands-on learning by accompanying experienced care coordinator on assessments and client visits. Accelerates learning and ensures quality standards.", action: "Arrange shadowing with nearby franchise or during training", timeline: "First 1-2 weeks", duration: "7-14 days", cost: "Travel if shadowing at another location" }
                        ]
                    },
                    {
                        name: "Caregiver Recruitment & Onboarding",
                        items: [
                            { title: "Post Jobs on Indeed", summary: "Indeed is primary job board for caregiver recruitment. Sponsored posts increase visibility. Target compassionate individuals with caregiving interest or experience.", action: "Create compelling job posting highlighting culture and benefits", timeline: "4-6 weeks before opening", duration: "28-42 days", cost: "$150-300/month for sponsored posts" },
                            { title: "Post Jobs on Care.com", summary: "Care.com specifically serves care industry with qualified candidates actively seeking caregiving positions. High-quality applicant source.", action: "Create employer profile and post positions", timeline: "4-6 weeks before opening", duration: "28-42 days", cost: "$200-400/month for employer access" },
                            { title: "Post on Local Job Platforms", summary: "Leverage local job boards, community college career centers, and Annapolis-area employment websites to reach local candidates.", action: "Identify and post on 3-5 local platforms", timeline: "4-6 weeks before opening", duration: "28-42 days", cost: "$0-100/month" },
                            { title: "Partner with Community Organizations", summary: "Build relationships with churches, community centers, senior centers, and workforce development organizations that can refer caregiving candidates.", action: "Meet with organization leaders, provide job descriptions", timeline: "Ongoing, start 4-6 weeks before opening", duration: "N/A (Ongoing)", cost: "Free; relationship building" },
                            { title: "Implement Caregiver Referral Program", summary: "Incentivize current caregivers to refer qualified candidates. Typical bonus $250-500 per successful hire.", action: "Create referral bonus program with clear terms", timeline: "Launch at opening", duration: "1 day", cost: "$250-500 per successful referral" },
                            { title: "Attend Job Fairs and Community Events", summary: "Direct recruitment at job fairs, community events, and health career events. Allows face-to-face interaction and immediate screening.", action: "Identify events, reserve booth space, prepare materials", timeline: "Ongoing starting 4 weeks before opening", duration: "N/A (Ongoing)", cost: "$50-200 per event" },
                            { title: "Review Applications and Initial Screening", summary: "Systematic review of applications focusing on relevant experience, reliability, compassion, and basic qualifications. Phone screening filters for communication skills.", action: "Develop screening criteria and phone script", timeline: "Ongoing as applications received", duration: "N/A (Ongoing)", cost: "Time investment" },
                            { title: "Conduct In-Person Interviews", summary: "Face-to-face interviews assessing personality, compassion, reliability, problem-solving skills, and cultural fit. Use behavioral interview questions.", action: "Schedule interviews, use structured interview guide", timeline: "Ongoing, plan 2-3 weeks for hiring process", duration: "14-21 days", cost: "Time investment" },
                            { title: "Conduct Criminal Background Checks", summary: "Mandatory comprehensive background check including criminal history at county, state, and national levels. Protects vulnerable clients.", action: "Use background screening service approved for home care", timeline: "After conditional offer, before start date", duration: "3-5 days", cost: "$25-50 per candidate" },
                            { title: "Check Driving Records", summary: "MVR (motor vehicle record) check for caregivers who will drive for work. Ensures safe driving history.", action: "Request MVR through background screening service", timeline: "With background check", duration: "3-5 days", cost: "$10-20 per candidate" },
                            { title: "Check Professional References", summary: "Contact minimum 3 professional references to verify employment history, reliability, caregiving skills, and character. Critical for predicting performance.", action: "Call references with structured question list", timeline: "After interview, before offer", duration: "1-3 days", cost: "Time investment" },
                            { title: "Complete Drug Screening", summary: "Pre-employment drug test ensures caregivers are not using substances that could impair judgment or performance.", action: "Send candidates to approved testing facility", timeline: "After conditional offer", duration: "1-3 days", cost: "$30-50 per candidate" },
                            { title: "Conduct TB Testing", summary: "Tuberculosis testing required in most states for home care workers. Protects both caregivers and vulnerable clients.", action: "Require recent TB test or provide testing", timeline: "Before first client assignment", duration: "1-3 days", cost: "$25-50 per caregiver if provided" },
                            { title: "Obtain Health Clearances", summary: "General health screening ensuring caregiver can physically perform job requirements and doesn't pose health risk to clients. May include physical exam.", action: "Provide health clearance form to caregiver's physician", timeline: "Before first client assignment", duration: "1-3 days", cost: "Caregiver responsibility or $50-100 if provided" },
                            { title: "Complete New Hire Paperwork", summary: "I-9, W-4, state withholding, direct deposit, emergency contacts, and acknowledgment forms. Legally required documentation.", action: "Provide packet and verify completion of all forms", timeline: "First day of employment", duration: "1 day", cost: "Included" },
                            { title: "Review and Sign Employee Handbook", summary: "Employee handbook outlines policies, procedures, expectations, benefits, and rules. Signed acknowledgment protects employer in disputes.", action: "Provide handbook and obtain signed acknowledgment", timeline: "Orientation day", duration: "1 day", cost: "Included" },
                            { title: "Complete Orientation Training", summary: "Comprehensive initial training covering company policies, care philosophy, safety procedures, infection control, client rights, and basic caregiving skills. Typically 16-40 hours.", action: "Conduct structured orientation program", timeline: "Before first client assignment", duration: "2-5 days", cost: "Training wages $12-15/hour x training hours" },
                            { title: "Dementia Care Training Certification", summary: "Specialized training in caring for clients with Alzheimer's and dementia including communication techniques, behavioral management, and safety.", action: "Complete Comfort Keepers dementia care program", timeline: "Within first 30 days", duration: "30 days", cost: "Included in training program" },
                            { title: "CPR/First Aid Certification", summary: "Emergency response training prepares caregivers to handle medical emergencies. Required or strongly recommended in most states.", action: "Arrange class through American Heart Association or Red Cross", timeline: "Within first 60 days", duration: "60 days", cost: "$50-75 per caregiver" },
                            { title: "Technology Platform Training for Caregivers", summary: "Training on using mobile app or call system for clocking in/out, documenting care, reporting issues, and viewing schedules.", action: "Hands-on training with practice scenarios", timeline: "During orientation", duration: "1 day", cost: "Included" },
                            { title: "Shadow Experienced Caregiver on Initial Shifts", summary: "New caregivers accompany experienced caregiver on 2-4 client visits before independent assignments. Builds confidence and ensures quality.", action: "Schedule shadowing shifts with top-performing caregivers", timeline: "First 1-2 weeks after orientation", duration: "7-14 days", cost: "Pay for both caregivers during shadowing" }
                        ]
                    }
                ]
            },

            // PHASE 3: COMPLIANCE & REGULATORY
            {
                phase: "Phase 3: Compliance & Regulatory",
                sub_phases: [
                    {
                        name: "State & Local Compliance",
                        items: [
                            { title: "Register as Home Care Provider with Maryland OHCQ", summary: "Maryland Office of Health Care Quality oversees home care agencies. Registration ensures compliance with state care standards and allows legal operation.", action: "Submit application with required documentation", timeline: "60-90 days before planned opening", duration: "60-90 days", cost: "$200-500 application fee" },
                            { title: "Complete Caregiver Background Check Registry", summary: "Maryland maintains registry of caregiver background checks. Caregivers must be registered and cleared before providing care.", action: "Submit caregivers for registry enrollment", timeline: "Before first client assignment", duration: "N/A (Milestone)", cost: "$25-50 per caregiver" },
                            { title: "Comply with Maryland Wage and Hour Laws", summary: "Follow Maryland minimum wage ($15/hour as of 2025), overtime rules (time and half over 40 hours), and payment timing requirements. Violations result in penalties and lawsuits.", action: "Set up compliant payroll system and policies", timeline: "Before hiring employees", duration: "N/A (Milestone)", cost: "Included in payroll setup" },
                            { title: "Verify Workers' Compensation Coverage", summary: "Maryland requires workers' comp for all employers with employees. Coverage must be active before first employee starts.", action: "Obtain policy and certificate of insurance", timeline: "Before hiring first employee", duration: "N/A (Milestone)", cost: "2-5% of payroll" }
                        ]
                    },
                    {
                        name: "Employment Compliance",
                        items: [
                            { title: "Create Compliant Employee Handbook", summary: "Handbook documents all employment policies, procedures, benefits, and rules. Must comply with federal and Maryland employment laws. Provides legal protection.", action: "Work with employment attorney or HR consultant", timeline: "Complete before hiring employees", duration: "7-14 days", cost: "$500-1,500 for attorney review" },
                            { title: "Establish Wage and Hour Policies", summary: "Clear policies on pay rates, overtime calculation, time recording, meal breaks, and payment schedules. Must comply with FLSA and Maryland law.", action: "Document policies in handbook and train managers", timeline: "Before hiring employees", duration: "N/A (Milestone)", cost: "Included in handbook development" },
                            { title: "Implement Anti-Discrimination and Harassment Policies", summary: "Written policies prohibiting discrimination and harassment based on protected classes. Required by law and essential for workplace culture. Must include complaint procedures.", action: "Include comprehensive policies in handbook", timeline: "Before hiring employees", duration: "N/A (Milestone)", cost: "Included in handbook development" },
                            { title: "Set Up OSHA-Compliant Safety Protocols", summary: "Occupational Safety and Health Administration requires workplace safety programs including bloodborne pathogen training, hazard communication, and injury reporting.", action: "Develop safety program and train employees", timeline: "Before employees start working", duration: "1-3 days", cost: "$200-500 for program development" },
                            { title: "Create Emergency Response Procedures", summary: "Written protocols for handling client emergencies including falls, medical crises, natural disasters, and caregiver safety threats. Ensures consistent, appropriate response.", action: "Document procedures and train all staff and caregivers", timeline: "Before first client assignment", duration: "1-3 days", cost: "Included in policy development" }
                        ]
                    },
                    {
                        name: "Documentation & Recordkeeping",
                        items: [
                            { title: "Establish Client Care Plans and Service Agreements", summary: "Standardized templates for assessing client needs, developing individualized care plans, and documenting service agreements including scope, rates, and terms.", action: "Customize Comfort Keepers templates for your market", timeline: "Before first client", duration: "1 day", cost: "Templates provided by franchise" },
                            { title: "Set Up Caregiver Personnel Files", summary: "Confidential files for each caregiver containing application, background checks, certifications, training records, performance evaluations, and disciplinary actions. Required by law and accreditation.", action: "Create secure filing system with proper access controls", timeline: "Set up system before hiring caregivers", duration: "N/A (Milestone)", cost: "Included in office supplies" },
                            { title: "Create Incident and Accident Report System", summary: "Standardized forms and procedures for documenting client falls, injuries, medication errors, complaints, or any adverse events. Critical for liability protection and quality improvement.", action: "Implement reporting system with 24-hour notification protocols", timeline: "Before first client assignment", duration: "1 day", cost: "Forms included in franchise materials" },
                            { title: "Establish Medication Management Logs", summary: "If providing medication reminders or administration (per state scope), detailed logs documenting all medication-related activities. Required for compliance and liability protection.", action: "Create medication documentation system and train staff", timeline: "Before offering medication services", duration: "N/A (Milestone)", cost: "Included in documentation system" },
                            { title: "Set Up Time and Attendance Records", summary: "Accurate system for tracking caregiver hours including clock in/out times, breaks, and client visit verification. Required by wage laws and for accurate billing.", action: "Implement electronic visit verification (EVV) system", timeline: "Before first caregiver assignment", duration: "N/A (Milestone)", cost: "Included in operations software" },
                            { title: "Create Quality Assurance Documentation", summary: "Forms and checklists for supervisory visits, client satisfaction surveys, caregiver evaluations, and quality monitoring. Demonstrates commitment to excellence.", action: "Customize quality assurance templates", timeline: "Before first client assignment", duration: "1 day", cost: "Included in franchise materials" }
                        ]
                    },
                    {
                        name: "Quality & Safety Standards",
                        items: [
                            { title: "Develop Client Intake and Assessment Procedures", summary: "Step-by-step process for receiving inquiries, scheduling assessments, conducting comprehensive home evaluations, identifying needs, and determining service appropriateness.", action: "Document procedures and train care coordinators", timeline: "Complete before taking first client inquiry", duration: "1 day", cost: "Included in operations manual" },
                            { title: "Create Care Plan Development Protocols", summary: "Standardized process for translating assessment findings into detailed, individualized care plans specifying tasks, frequency, caregiver requirements, and goals.", action: "Use Comfort Keepers templates and customize for Maryland", timeline: "Before first client", duration: "1 day", cost: "Included in franchise materials" },
                            { title: "Establish Medication Management Policies", summary: "Clear policies on scope of medication services allowed in Maryland including reminders vs. administration, documentation requirements, and caregiver training needed.", action: "Verify Maryland regulations and document compliant policies", timeline: "Before offering any medication services", duration: "N/A (Milestone)", cost: "Legal review $200-500" },
                            { title: "Document Emergency Procedures and Protocols", summary: "Written protocols for handling medical emergencies, client death, natural disasters, caregiver no-shows, and other crisis situations. Includes emergency contact chains.", action: "Create comprehensive emergency manual", timeline: "Before first client assignment", duration: "1 day", cost: "Included in policy development" },
                            { title: "Implement Infection Control Guidelines", summary: "Policies and training on preventing disease transmission including hand washing, use of personal protective equipment (PPE), handling body fluids, and cleaning procedures.", action: "Develop infection control program, stock PPE supplies", timeline: "Before first client assignment", duration: "1 day", cost: "$200-300 for initial PPE supplies" },
                            { title: "Establish Client Rights and Privacy Policies", summary: "Written documentation of client rights including dignity, choice, privacy, and confidentiality. HIPAA compliance procedures for protecting health information.", action: "Post client bill of rights, implement HIPAA policies", timeline: "Before first client", duration: "1 day", cost: "Included in compliance materials" }
                        ]
                    },
                    {
                        name: "Risk Management",
                        items: [
                            { title: "Implement Incident Reporting System", summary: "Formal process requiring immediate reporting of any incidents affecting client safety, health, or rights. Includes investigation procedures and corrective action plans.", action: "Train all staff on reporting requirements and procedures", timeline: "Before first client assignment", duration: "1 day", cost: "Included in operations system" },
                            { title: "Create Quality Assurance Monitoring Plan", summary: "Scheduled supervisory visits, random spot checks, client satisfaction surveys, and caregiver performance reviews to ensure service quality and identify improvement areas.", action: "Develop monitoring calendar and accountability system", timeline: "Before first client assignment", duration: "1 day", cost: "Time investment for monitoring activities" },
                            { title: "Establish Client Satisfaction Survey Process", summary: "Regular surveys (monthly or quarterly) measuring client satisfaction with caregivers, services, office responsiveness, and overall experience. Critical feedback for quality improvement.", action: "Implement automated survey system", timeline: "Launch with first clients", duration: "1 day", cost: "Included in CRM system" },
                            { title: "Create Caregiver Supervision and Evaluation System", summary: "Formal program of regular supervisory visits, performance evaluations, continuing education, and recognition. Improves quality and retention.", action: "Develop evaluation forms and supervision schedule", timeline: "Before first caregiver assignment", duration: "1 day", cost: "Time investment for supervision" }
                        ]
                    }
                ]
            },

            // PHASE 4: MARKETING & BUSINESS DEVELOPMENT
            {
                phase: "Phase 4: Marketing & Business Development",
                sub_phases: [
                    {
                        name: "Market Research & Planning",
                        items: [
                            { title: "Research Local Competitors", summary: "Identify all home care agencies serving Annapolis/Anne Arundel County. Analyze their services, pricing, reputation, strengths, and weaknesses to inform your positioning.", action: "Create competitor analysis spreadsheet with 10-15 agencies", timeline: "6-8 weeks before opening", duration: "42-56 days", cost: "Time investment" },
                            { title: "Identify Service Gaps and Opportunities", summary: "Determine underserved niches in market such as specialized dementia care, post-hospitalization services, or specific geographic areas. Opportunities for differentiation.", action: "Interview referral sources about unmet needs", timeline: "4-6 weeks before opening", duration: "28-42 days", cost: "Time investment" },
                            { title: "Analyze Competitor Pricing Strategies", summary: "Research competitive hourly rates for various service levels. Understand market pricing floor and ceiling to position your rates competitively while maintaining profitability.", action: "Secret shop competitors, analyze pricing structures", timeline: "4-6 weeks before opening", duration: "28-42 days", cost: "Time investment" },
                            { title: "Review Competitor Marketing Approaches", summary: "Study how competitors market their services including websites, advertising, community presence, and messaging. Identify what works and gaps you can fill.", action: "Analyze competitor digital presence and marketing materials", timeline: "4-6 weeks before opening", duration: "28-42 days", cost: "Time investment" },
                            { title: "Analyze Senior Population Demographics", summary: "Research Anne Arundel County senior population including age distribution, income levels, geographic concentration, and growth projections. Validates market opportunity.", action: "Review census data and Maryland Department of Aging reports", timeline: "During business planning phase", duration: "N/A (Included in planning)", cost: "Free public data" },
                            { title: "Identify Hospital and Rehabilitation Centers", summary: "Map all hospitals, rehab centers, and skilled nursing facilities in territory. These are primary referral sources for post-hospitalization and transitional care.", action: "Create target list with contact information for discharge planners", timeline: "4 weeks before opening", duration: "28 days", cost: "Time investment" },
                            { title: "Map Assisted Living Facility Relationships", summary: "Assisted living facilities often need home care for residents requiring extra support. Build partnerships to provide supplemental care services.", action: "List all AL facilities in territory, research partnerships", timeline: "4 weeks before opening", duration: "28 days", cost: "Time investment" },
                            { title: "Identify Adult Day Care Centers", summary: "Adult day programs serve similar... [incomplete in source]", action: "List all adult day care centers in territory", timeline: "4 weeks before opening", duration: "28 days", cost: "Time investment" }
                        ]
                    },
                    {
                        name: "Marketing Implementation",
                        items: [
                            { title: "Complete Local SEO Setup (Google My Business)", summary: "Optimize your Google My Business profile for Annapolis. Critical for appearing in local search results and driving website traffic. Includes service areas, hours, and photos.", action: "Claim, verify, and fully optimize Google My Business listing", timeline: "3-4 weeks before opening", duration: "21-28 days", cost: "Free (Time investment)" },
                            { title: "Launch Initial Paid Digital Advertising Campaign (Google/Facebook)", summary: "Run targeted ads to drive immediate leads in the Annapolis area. Focus on high-intent keywords (e.g., 'home care Annapolis').", action: "Develop ad creative, set budget ($500-1,000/month), launch campaigns", timeline: "2 weeks before opening", duration: "14 days", cost: "$500-1,000 initial budget" },
                            { title: "Draft and Issue Press Release", summary: "Announce the opening of your new Comfort Keepers franchise in the Annapolis market. Send to local media outlets, business journals, and community newsletters.", action: "Write release, distribute to 5-10 local outlets", timeline: "2 weeks before opening", duration: "14 days", cost: "$0-500 for distribution service" },
                            { title: "Develop Social Media Content Calendar", summary: "Plan regular posts for Facebook and Instagram focusing on community events, caregiving tips, and testimonials. Ensures consistent brand messaging.", action: "Create 30 days of content scheduled in advance", timeline: "1 week before opening", duration: "7 days", cost: "Time investment" },
                            { title: "Order Promotional Swag and Leave-Behinds", summary: "Pens, sticky notes, small branded items to leave with referral sources and clients. Maintains brand visibility.", action: "Design and order initial stock of 3-5 promotional items", timeline: "3-4 weeks before opening", duration: "21-28 days", cost: "$500-1,000" },
                            { title: "Install Google Analytics and Conversion Tracking", summary: "Monitor website traffic, source of visitors, and conversion rate. Essential for measuring marketing return on investment (ROI).", action: "Implement tracking code on website subdomain", timeline: "Before website launch", duration: "1 day", cost: "Free (Time investment)" }
                        ]
                    },
                    {
                        name: "Referral Network Development",
                        items: [
                            { title: "Create Referral Source Target List", summary: "Prioritized list of top potential referral sources (hospitals, physicians, geriatric attorneys, financial advisors). Focus marketing efforts on this list.", action: "Filter target list to top 20 contacts", timeline: "4 weeks before opening", duration: "28 days", cost: "Time investment" },
                            { title: "Schedule Introductory Meetings with Top Hospitals", summary: "Meet with discharge planners and social workers at Anne Arundel Medical Center (AAMC) and other key hospitals to introduce services and drop off brochures.", action: "Call/email to schedule 5-10 introductory meetings", timeline: "2-4 weeks before opening", duration: "14-28 days", cost: "Time and travel" },
                            { title: "Introduce Services to Geriatric Physicians", summary: "Target primary care physicians and geriatric specialists who frequently recommend home care to their patients. Establish credibility and trust.", action: "In-person visits and follow-up emails to 10-15 practices", timeline: "Ongoing, start 4 weeks before opening", duration: "N/A (Ongoing)", cost: "Time and travel" },
                            { title: "Network with Elder Law Attorneys", summary: "Attorneys specializing in estate planning and elder law are key referral sources for high-value clients needing long-term care.", action: "Attend local bar association meetings, schedule one-on-one lunches", timeline: "Ongoing, start 4 weeks before opening", duration: "N/A (Ongoing)", cost: "$100-300 for networking meals" },
                            { title: "Develop Relationships with Financial Advisors/Fiduciaries", summary: "Financial professionals help families manage the costs of care and are often the first point of contact when care decisions are needed.", action: "Identify local professionals, send introductory packets", timeline: "Ongoing, start 4 weeks before opening", duration: "N/A (Ongoing)", cost: "Time investment" },
                            { title: "Host a 'Lunch and Learn' for Referral Sources", summary: "A small event hosting key referral sources at your office or a local venue. Educate them on your services and Comfort Keepers differentiation.", action: "Plan event for 10-15 guests, send invitations, develop presentation", timeline: "Within first 30 days of opening", duration: "30 days", cost: "$200-500 for catering/venue" }
                        ]
                    },
                    {
                        name: "Community Engagement",
                        items: [
                            { title: "Join Annapolis Chamber of Commerce", summary: "Membership provides networking opportunities, increases local business credibility, and offers marketing channels through chamber events and directories.", action: "Complete membership application and pay dues", timeline: "4 weeks before opening", duration: "28 days", cost: "$300-600 annual dues" },
                            { title: "Sponsor a Local Senior Event/Activity", summary: "Sponsorship increases brand visibility within the target demographic (seniors and their families) and demonstrates commitment to the community.", action: "Identify and sponsor a senior center event or charity walk", timeline: "Ongoing, target 1 event per quarter", duration: "N/A (Ongoing)", cost: "$250-1,000 per sponsorship" },
                            { title: "Host Educational Seminars for Seniors/Families", summary: "Topics like managing caregiver stress, or aging in place. Positions you as expert and generates leads.", action: "Develop topics, partner with venues, promote events", timeline: "Monthly starting month 2", duration: "N/A (Monthly)", cost: "$100-300 per event for refreshments and materials" },
                            { title: "Participate in Health Fairs", summary: "Community health fairs attract seniors seeking health information and resources. Opportunity for face-to-face interaction and lead generation.", action: "Identify health fairs, register for booth space", timeline: "Ongoing, typically spring and fall events", duration: "N/A (Event Dependent)", cost: "$50-200 per event" },
                            { title: "Volunteer with Local Senior Organizations", summary: "Volunteer time at Meals on Wheels, senior centers, or aging advocacy groups. Builds relationships, demonstrates values, and creates goodwill.", action: "Identify volunteer opportunities, commit time", timeline: "Ongoing starting month 2", duration: "N/A (Ongoing)", cost: "Time investment" }
                        ]
                    }
                ]
            },

            // PHASE 5: FINANCIAL MANAGEMENT
            {
                phase: "Phase 5: Financial Management",
                sub_phases: [
                    {
                        name: "Budget & Projections",
                        items: [
                            { title: "Review Initial Franchise Fee Payment", summary: "$59,950 franchise fee covers franchise rights, initial training, operations manuals, and initial support.", action: "Verify payment was processed and receipt filed", timeline: "Immediately upon signing agreement", duration: "1 day", cost: "Initial franchise fee $59,950 (Paid)" },
                            { title: "Finalize Startup Budget and Capital Allocation", summary: "Detailed budget covering all pre-opening costs: fees, insurance, office setup, salaries, and initial marketing spend. Ensures capital is allocated correctly.", action: "Create final spreadsheet from FDD estimates, finalize funding access", timeline: "Before opening", duration: "7 days", cost: "Included in business plan" }
                        ]
                    },
                    {
                        name: "Financial Tracking Systems",
                        items: [
                            { title: "Set Up Business Bank Accounts", summary: "Separate checking and savings accounts for business use. Essential for liability protection and tax compliance. Should be set up immediately after entity formation.", action: "Open accounts with local commercial bank using EIN and formation documents", timeline: "Within 7 days of EIN receipt", duration: "7 days", cost: "Minimal fees" },
                            { title: "Implement Accounting Software (QuickBooks or similar)", summary: "System for managing accounts receivable, accounts payable, payroll, and financial reporting. Critical for monitoring profitability and tax compliance.", action: "Purchase software, set up chart of accounts (franchise standard), integrate with bank accounts.", timeline: "Before opening", duration: "7 days", cost: "$50-150/month subscription" },
                            { title: "Create Cash Flow Forecasting System", summary: "System for managing accounts receivable, accounts payable, and cash position. Prevents cash shortfalls that could threaten business.", action: "Create cash flow forecasting spreadsheet", timeline: "Before opening", duration: "1 day", cost: "Time investment" },
                            { title: "Create Budget vs. Actual Monitoring", summary: "Compare actual financial performance to budget projections monthly. Identifies variances and enables corrective action.", action: "Create budget comparison reports", timeline: "Monthly starting first month", duration: "N/A (Monthly)", cost: "Time investment" },
                            { title: "Establish Key Performance Indicators (KPIs) Tracking", summary: "Dashboard tracking critical business metrics like revenue per client, caregiver utilization, gross margin, and client retention. Enables data-driven management.", action: "Create KPI dashboard in Excel or operations software", timeline: "Launch at opening", duration: "1 day", cost: "Time investment" }
                        ]
                    },
                    {
                        name: "Pricing & Revenue",
                        items: [
                            { title: "Conduct Competitive Rate Analysis", summary: "Research what competitors charge for various service levels in Annapolis market. Ensures your pricing is competitive while maintaining profitability.", action: "Secret shop competitors and compile pricing data", timeline: "4-6 weeks before opening", duration: "28-42 days", cost: "Time investment" },
                            { title: "Establish Final Rate Sheet and Pricing Structure", summary: "Document final pricing for all services (hourly, live-in, specialty care) based on competitive analysis and desired margin. Share with staff.", action: "Finalize rate sheet and print materials", timeline: "2 weeks before opening", duration: "14 days", cost: "Included in planning" },
                            { title: "Set Up Fee Schedule for Client Assessments", summary: "Determine if there is a fee for the initial in-home assessments. Standard industry practice and critical for understanding client needs and closing sales.", action: "Create assessment scheduling procedures", timeline: "Before first inquiry", duration: "1 day", cost: "Time investment for assessments" },
                            { title: "Develop Care Needs Assessment Tools", summary: "Comprehensive assessment forms evaluating physical, cognitive, social, and environmental needs. Foundation for care plan development.", action: "Customize Comfort Keepers assessment tools", timeline: "Before first assessment", duration: "1 day", cost: "Forms included in franchise materials" },
                            { title: "Create Service Agreement Templates", summary: "Legally reviewed contracts defining services, rates, payment terms, cancellation policies, and responsibilities. Protects both parties.", action: "Have attorney review service agreement template", timeline: "Before first client", duration: "1 day", cost: "Legal review $300-500" },
                            { title: "Develop Client Onboarding Checklist", summary: "Step-by-step process for new client setup including paperwork, caregiver matching, schedule coordination, and first visit preparation.", action: "Create checklist and train staff on process", timeline: "Before first client", duration: "1 day", cost: "Included in operations development" },
                            { title: "Establish Family Communication Procedures", summary: "Regular communication with family members through scheduled calls, care notes, and updates. Keeps families informed and builds trust.", action: "Create family communication schedule and documentation system", timeline: "Before first client", duration: "1 day", cost: "Included in operations" }
                        ]
                    }
                ]
            },

            // PHASE 6: OPERATIONS LAUNCH (First 90 Days)
            {
                phase: "Phase 6: Operations Launch (First 90 Days)",
                sub_phases: [
                    {
                        name: "Client Services Setup",
                        items: [
                            { title: "Establish System for Caregiver-Client Matching", summary: "Systematic process for matching caregiver skills, personality, and availability to client needs and preferences to maximize compatibility and retention.", action: "Document matching criteria and train care coordinator", timeline: "Before first client", duration: "1 day", cost: "Included in operations manual" },
                            { title: "Finalize Backup Caregiver Protocols", summary: "Clear procedures for finding a replacement caregiver in case of illness, emergency, or no-show. Essential for client safety and reliability.", action: "Create on-call schedule and emergency contact list", timeline: "Before first client", duration: "1 day", cost: "Included in operations manual" },
                            { title: "Set Up Client Billing and Invoicing Cycle", summary: "Determine billing frequency (weekly/bi-weekly), set up automated invoicing in ClearCare, and define payment collection policies.", action: "Configure ClearCare billing module, train staff on invoicing process", timeline: "Before first client", duration: "1 day", cost: "Included in software setup" },
                            { title: "Implement Payroll Processing System", summary: "System for accurately calculating caregiver hours (from EVV), deducting taxes, and issuing paychecks/direct deposits compliant with Maryland laws.", action: "Integrate ClearCare with payroll provider (e.g., QuickBooks Payroll or ADP)", timeline: "Before first caregiver payday", duration: "7 days", cost: "$50-100/month service fee" }
                        ]
                    },
                    {
                        name: "Quality Assurance & Continuous Improvement",
                        items: [
                            { title: "Implement Weekly Caregiver Check-ins", summary: "Regular contact with caregivers to address concerns, provide support, gather feedback, and ensure job satisfaction. Improves retention and quality.", action: "Schedule weekly check-in calls or meetings", timeline: "Launch with first caregivers", duration: "1 day", cost: "Time investment" },
                            { title: "Establish Monthly Client Satisfaction Calls", summary: "Proactive outreach to clients and families to assess satisfaction, identify issues early, and demonstrate commitment to quality.", action: "Create satisfaction call script and tracking system", timeline: "Launch with first clients", duration: "1 day", cost: "Time investment" },
                            { title: "Schedule Quarterly Care Plan Reviews", summary: "Formal review of care plans every 90 days to assess changing needs, adjust services, and ensure continued appropriateness of care.", action: "Develop 90-day review calendar and forms", timeline: "Every 90 days", duration: "N/A (Recurring)", cost: "Time investment" },
                            { title: "Conduct Initial Supervisory Visits", summary: "Unannounced supervisory visits to client homes during care delivery to observe caregiver performance and ensure quality standards.", action: "Schedule supervisor visit calendar (e.g., within first 30 days of service)", timeline: "Ongoing starting with first clients", duration: "N/A (Ongoing)", cost: "Supervisor time" },
                            { title: "Establish Incident Investigation Procedures", summary: "Formal process for investigating accidents, complaints, or quality concerns including root cause analysis and corrective action plans.", action: "Create incident investigation protocol", timeline: "Before first client", duration: "1 day", cost: "Included in policy development" },
                            { title: "Implement Client Feedback Collection and Review", summary: "Systematic gathering of client and family feedback through surveys, calls, and informal conversations. Use to identify improvement opportunities.", action: "Create feedback collection and analysis process", timeline: "Ongoing from opening", duration: "N/A (Ongoing)", cost: "Survey tools included in CRM" },
                            { title: "Conduct Caregiver Performance Evaluations", summary: "Formal performance reviews every 6-12 months evaluating skills, reliability, client satisfaction, and professional development needs.", action: "Create evaluation forms and schedule (e.g., 90 days and 6 months after hire)", timeline: "90 days and 6 months after hire", duration: "N/A (Milestone)", cost: "Time investment" },
                            { title: "Develop Ongoing Training and Continuing Education Plan", summary: "Schedule regular in-service training for caregivers on new topics, skill refreshers, and franchise updates. Required for compliance and quality.", action: "Create monthly training calendar", timeline: "Monthly after launch", duration: "N/A (Monthly)", cost: "Time investment" }
                        ]
                    },
                    {
                        name: "Key Performance Indicator (KPI) Tracking",
                        items: [
                            { title: "Track Caregiver Retention Rate", summary: "Percentage of caregivers retained over a period (e.g., 90 days, 1 year). High retention is critical for quality and cost control.", action: "Calculate monthly retention rate", timeline: "Monthly starting month 1", duration: "N/A (Monthly)", cost: "Time investment" },
                            { title: "Monitor Client Retention Rate", summary: "Percentage of clients retained over a period. Indicates client satisfaction and business health.", action: "Calculate monthly client retention rate", timeline: "Monthly starting month 1", duration: "N/A (Monthly)", cost: "Time investment" },
                            { title: "Monitor Client Satisfaction Score (CSAT/NPS)", summary: "Overall score from client surveys measuring client experience. Target: 4.5+ out of 5.0.", action: "Review survey results in CRM, address specific complaints, improve caregiver training", timeline: "Ongoing from opening", duration: "N/A (Ongoing)", cost: "Included in CRM" },
                            { title: "Track Lead Generation Rate", summary: "Number of new inquiries per month from all sources. Measures marketing effectiveness and brand awareness. Target: 20-30 qualified inquiries per month initially.", action: "Track leads in CRM, increase marketing spend if missing target", timeline: "Monthly starting month 1", duration: "N/A (Monthly)", cost: "Included in CRM" },
                            { title: "Calculate Inquiry to Client Conversion Rate", summary: "Percentage of inquiries that become paying clients. Measures sales effectiveness and service appeal. Target: 30-40% conversion rate.", action: "Review CRM reporting on inquiry outcomes, improve sales process/response time", timeline: "Monthly starting month 1", duration: "N/A (Monthly)", cost: "Included in CRM" },
                            { title: "Measure Cost Per Acquisition", summary: "Total marketing costs divided by number of new clients acquired. Determines marketing ROI and sustainability. Target: Under $500 per new client.", action: "Track marketing expenses vs. new clients, optimize spend, focus on referrals", timeline: "Monthly starting month 1", duration: "N/A (Monthly)", cost: "Time investment" },
                            { title: "Track Referral Source Productivity", summary: "Number of clients referred by each referral source category. Identifies most valuable relationships. Target: Top 10 sources generate 50%+ of clients.", action: "Review referral source field in CRM, nurture top sources", timeline: "Monthly starting month 1", duration: "N/A (Monthly)", cost: "Included in CRM" },
                            { title: "Monitor Website Traffic and Engagement", summary: "Monthly website visitors, page views, and time on site. Indicates online presence strength. Target: 200+ visitors per month, 2+ min time on site.", action: "Review Google Analytics, improve SEO/content marketing", timeline: "Monthly starting month 1", duration: "N/A (Monthly)", cost: "Time investment" },
                            { title: "Track Online Review Ratings and Quantity", summary: "Average star rating and number of reviews on Google, Facebook, and other platforms. Critical trust factor. Target: 4.8+ stars, 20+ reviews within first year.", action: "Implement systematic review requests, address all negative feedback", timeline: "Ongoing from opening", duration: "N/A (Ongoing)", cost: "Time investment" }
                        ]
                    }
                ]
            }
        ];


        // --- 2. FIREBASE & AUTH SETUP ---

        if (firebaseConfig) {
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);

            // 1. Authenticate user
            onAuthStateChanged(auth, async (user) => {
                if (!user) {
                    try {
                        if (initialAuthToken) {
                            await signInWithCustomToken(auth, initialAuthToken);
                        } else {
                            await signInAnonymously(auth);
                        }
                    } catch (error) {
                        console.error("Authentication failed:", error);
                    }
                }
                currentUserId = auth.currentUser?.uid || crypto.randomUUID();
                document.getElementById('user-id').textContent = currentUserId;

                // 2. Once authenticated, start listening to Firestore
                setupFirestoreListener();
            });
        } else {
            console.error("Firebase configuration not found. Cannot persist data.");
            document.getElementById('loading-message').textContent = "Error: Firebase config missing. Checklist tracking is disabled.";
            renderChecklist({});
        }

        const FIREBASE_COLLECTION = 'checklist';
        const FIREBASE_DOCUMENT = 'annapolis_launch';

        let completedTasksMap = {}; // Maps item index to boolean completion status
        let totalTasksCount = 0;

        /**
         * Calculates the total number of tasks in the master data structure.
         */
        function calculateTotalTasks() {
            let count = 0;
            CHECKLIST_DATA.forEach(phase => {
                phase.sub_phases.forEach(subPhase => {
                    count += subPhase.items.length;
                });
            });
            totalTasksCount = count;
            document.getElementById('total-actions').textContent = count;
            document.getElementById('total-tasks-display').textContent = count;
        }
        calculateTotalTasks();


        /**
         * Sets up the real-time Firestore listener to update the UI on data changes.
         */
        function setupFirestoreListener() {
            if (!db || !currentUserId) return;

            const checklistRef = doc(db, `artifacts/${appId}/users/${currentUserId}/${FIREBASE_COLLECTION}/${FIREBASE_DOCUMENT}`);

            onSnapshot(checklistRef, (docSnap) => {
                const loadingMessage = document.getElementById('loading-message');
                if (loadingMessage) {
                    loadingMessage.style.display = 'none';
                }

                if (docSnap.exists()) {
                    completedTasksMap = docSnap.data().completedTasks || {};
                } else {
                    completedTasksMap = {};
                }
                renderChecklist(completedTasksMap);

            }, (error) => {
                console.error("Error listening to Firestore changes:", error);
                document.getElementById('loading-message').textContent = "Error loading data. Check console for details.";
            });
        }

        /**
         * Renders the HTML checklist based on the master data and the completion map.
         * @param {Object} completionMap - Map of task index to completion status (e.g., { '1': true, '5': false })
         */
        function renderChecklist(completionMap) {
            let html = '';
            let itemCounter = 0;
            let completedCount = 0;

            CHECKLIST_DATA.forEach((phaseData, phaseIndex) => {
                // Phase Header Card
                html += `<div class="phase-card">`;
                html += `<div class="phase-header" data-toggle="phase-body-${phaseIndex}">`;
                html += `<span class="phase-title">${phaseData.phase}</span>`;
                html += `<span>&#x25BC;</span>`;
                html += `</div>`;
                html += `<div class="phase-body" id="phase-body-${phaseIndex}">`;

                phaseData.sub_phases.forEach(subPhaseData => {
                    // Sub-Phase Header
                    html += `<div class="sub-phase-header">${subPhaseData.name}</div>`;

                    // Checklist Table for Sub-Phase
                    html += `<table class="checklist-table">`;
                    html += `<thead><tr>`;
                    html += `<th style="width: 30px;">#</th>`;
                    html += `<th style="width: 30px;">Done</th>`;
                    html += `<th>Action Item & Summary</th>`;
                    html += `<th style="width: 15%;">Timeline (Duration)</th>`;
                    html += `<th class="cost-col" style="width: 15%;">Est. Cost</th>`;
                    html += `</tr></thead>`;
                    html += `<tbody>`;

                    subPhaseData.items.forEach(item => {
                        itemCounter++;
                        const taskId = String(itemCounter);
                        const isCompleted = completionMap[taskId] === true;

                        if (isCompleted) {
                            completedCount++;
                        }

                        html += `<tr data-task-id="${taskId}" class="${isCompleted ? 'completed-row' : ''}">`;

                        // Item Index
                        html += `<td data-label="#">${taskId}</td>`;

                        // Checkbox
                        html += `<td data-label="Done">`;
                        html += `<input type="checkbox" id="task-${taskId}" data-task-id="${taskId}" ${isCompleted ? 'checked' : ''} onchange="window.toggleTask(this)">`;
                        html += `</td>`;

                        // Item Title & Summary
                        html += `<td data-label="Item">`;
                        html += `<span class="item-title">${item.title}</span>`;
                        html += `<span class="summary-text"><strong>Summary:</strong> ${item.summary} <br><strong>Action:</strong> ${item.action}</span>`;
                        html += `</td>`;

                        // Timeline / Duration
                        html += `<td data-label="Timeline">`;
                        html += `${item.timeline} <br> (${item.duration})`;
                        html += `</td>`;

                        // Est. Cost
                        html += `<td data-label="Est. Cost" class="cost-col">`;
                        html += `${item.cost}`;
                        html += `</td>`;

                        html += `</tr>`;
                    });

                    html += `</tbody></table>`;
                });

                html += `</div></div>`; // Close phase-body and phase-card
            });

            document.getElementById('checklist-container').innerHTML = html;
            updateProgress(completedCount);

            // Add event listeners for collapse/expand
            document.querySelectorAll('.phase-header').forEach(header => {
                header.removeEventListener('click', togglePhase); // Remove existing to prevent duplication
                header.addEventListener('click', togglePhase);
            });
            // Initial state: hide all bodies except the first one
            document.querySelectorAll('.phase-body').forEach((body, index) => {
                if (index > 0) {
                     body.style.display = 'none';
                } else {
                    const header = document.querySelector('.phase-header');
                    if (header) {
                         header.querySelector('span:last-child').innerHTML = '&#x25B2;';
                    }
                }
            });
        }

        function togglePhase() {
            const targetId = this.getAttribute('data-toggle');
            const targetBody = document.getElementById(targetId);
            if (targetBody.style.display === 'none' || targetBody.style.display === '') {
                targetBody.style.display = 'block';
                this.querySelector('span:last-child').innerHTML = '&#x25B2;'; // Up arrow
            } else {
                targetBody.style.display = 'none';
                this.querySelector('span:last-child').innerHTML = '&#x25BC;'; // Down arrow
            }
        }


        /**
         * Updates the progress counter and bar.
         * @param {number} completedCount - The number of completed tasks.
         */
        function updateProgress(completedCount) {
            const percentage = totalTasksCount > 0 ? ((completedCount / totalTasksCount) * 100).toFixed(1) : 0;
            document.getElementById('completed-count').textContent = completedCount;
            const progressBar = document.getElementById('progress-bar');
            progressBar.style.width = `${percentage}%`;
            progressBar.textContent = `${percentage}%`;
            if (percentage < 10) {
                progressBar.style.textAlign = 'left';
                progressBar.style.paddingLeft = '10px';
                progressBar.style.paddingRight = '0';
            } else {
                progressBar.style.textAlign = 'right';
                progressBar.style.paddingLeft = '0';
                progressBar.style.paddingRight = '10px';
            }
        }

        /**
         * Handles checkbox change and saves the state to Firestore.
         * @param {HTMLInputElement} checkbox - The checkbox element that triggered the change.
         */
        window.toggleTask = async function(checkbox) {
            if (!db || !currentUserId || !auth.currentUser) {
                console.error("Firebase or Auth not initialized.");
                return;
            }

            const taskId = checkbox.getAttribute('data-task-id');
            const isChecked = checkbox.checked;
            const row = checkbox.closest('tr');

            // 1. Update the local map
            const newMap = { ...completedTasksMap };
            if (isChecked) {
                newMap[taskId] = true;
                row.classList.add('completed-row');
            } else {
                delete newMap[taskId];
                row.classList.remove('completed-row');
            }
            completedTasksMap = newMap;

            // 2. Save to Firestore
            const checklistRef = doc(db, `artifacts/${appId}/users/${currentUserId}/${FIREBASE_COLLECTION}/${FIREBASE_DOCUMENT}`);
            try {
                // Only write the map of completed tasks
                await setDoc(checklistRef, { completedTasks: completedTasksMap }, { merge: false });
                // The renderChecklist function will be called automatically by onSnapshot
            } catch (error) {
                console.error("Error updating document:", error);
                // Optionally revert checkbox state if save fails
                checkbox.checked = !isChecked;
                row.classList.toggle('completed-row');
            }
        };

    </script>

</body>
</html>
